<html>
    <head>
        <meta charset="UTF-8">
        <meta name="renderer" content="webkit">
        <script src="js/jquery.js"></script>
  		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <title>主页</title>
        <link rel="stylesheet" href="layui/css/layui.css">
        <script src="layui/layui.js"></script>
        
        <link rel="stylesheet" href="css/main.css">

    </head>
    <body style="background: #ffffff;">
        <div class="leftfloat">
            <div class="layui-card " style="width: 800px;">
                 <div class="layui-card-body">
                    <div id="EchartZhu" style="width: 100%;height:500px;"></div>
                 </div>
            </div>

            
        </div>
       <div class="rightfloat">
        <table id="remincetable">

        </table>
       </div>
        

       
          
        

        <!-- <script>
        layui.config({
                base:'js/'
            }).extend({echarts:'echarts/echarts.js'}).use(['element', 'echarts'], function() {
            var element = layui.element,
                $=layui.jquery,
                echarts = layui.echarts;
            var chartZhu = echarts.init(document.getElementById('EchartZhu'))
            //指定图表配置项和数据
            var optionchart = {
                    title: {
                        text: '商品订单'
                    },
                    tooltip: {},
                    legend: {
                        data: ['销量']
                    },
                    xAxis: {
                        data: ['周一', '周二', '周三', '周四', '周五', '周六', '周天']
                    },
                    yAxis: {
                        type: 'value'
                    },
                    series: [{
                        name: '销量',
                        type: 'bar', //柱状
                        data: [100,200,300,400,500,600,700],
                        itemStyle: {
                            normal: { //柱子颜色
                                color: 'red'
                            }
                        },
                    },{
                        name:'产量',
                        type:'bar',
                        data:[120,210,340,430,550,680,720],
                        itemStyle:{
                            normal:{
                                color:'blue'
                            }
                        }
                    }]
                };

                
                chartZhu.setOption(optionchart,true);

        });
           
        </script> -->
<!-- ----------------------------------------------------------------------------------------------------- -->
        <!-- <script src="js/echarts/echarts.js"></script>
        <script>
            var myChart = echarts.init(document.getElementById('EchartZhu'));
            var option = { 
                title: {
                    text: '任务条目'
                },
            tooltip:{},
            legend: {
                data:['百分比']
            },
            xAxis: {
                data: ["任务一","任务二","任务三","任务四","任务五","任务六"]
            },
            yAxis: {},
            series: [{
                name: '百分比',
                type: 'bar',
                data: [5, 20, 36, 10, 10, 20]
            }]
        };     
        myChart.setOption(option); -->

        
        
        <script>
             layui.use('table',function() {
               var table = layui.table;
           
           table.render({
               elem:'#remincetable'
               ,cols: [[
                   {field:'id',title:' ',width:40}
                   ,{field:'opt',title:'操作',width:130}
                   ,{field:'check',title:'查看',width:60}
               ]]
               ,data:[{
                   "id":"1"
                   ,"opt":"设备总数"
                   ,"check":"查看"
               },
               {
                   "id":"2"
                   ,"opt":"30天内新增设备"
                   ,"查看":"查看"
               },

               ]
               
           })
        })

         layui.config({
                base:'js/echarts/'
            }).use(['element', 'echarts'], function() {
                var element = layui.element,
                $=layui.jquery,
                echarts = layui.echarts;
                
        let serveUrl = 'http://202.114.41.165:8080/radar_db'
        var myChart = echarts.init(document.getElementById('EchartZhu'));
        var labelRight = {
            position: 'right'
        };
        option = {
            title: {
                text: '主任务剩余计划时间',
                subtext: 'From ExcelHome',
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            grid: {
                top: 80,
                bottom: 30
            },
            xAxis: {
                type: 'value',
                position: 'top',
                splitLine: {
                    lineStyle: {
                        type: 'dashed'
                    }
                }
            },
            yAxis: {
                type: 'category',
                axisLine: {show: false},
                axisLabel: {show: false},
                axisTick: {show: false},
                splitLine: {show: false},
                data: []
            },
            series: [
                {
                    name: '剩余时间',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        show: true,
                        formatter: '{b}'
                    },
                    data: []
                }
            ]
        };
        myChart.setOption(option,true);
        myChart.showLoading();
        var Name=[];
        var Cycle=[];
        $.ajax({
            url:serveUrl+'/select',
            type:'post',
            dataType:'json',
            async:false,
            cache:false,
           
           
            success:function(dt){
                if(dt){
                    for(var i=0;i<dt.data.length;i++){
                        Name.push(dt.data[i].taskName);
                        console.log(dt.data[i].taskName)
                    }
                }
                if(dt){
                    for(var i=0;i<dt.data.length;i++){
                        Cycle.push(dt.data[i].taskCycle);
                    }
                }
                myChart.hideLoading();
                myChart.setOption({
                    yAxis:{data:Name},
                    series:[{data:Cycle}]
                })
            },
            error:function(errorMsg){
                alert("图表请求失败！");
                myChart.hideLoading();
            }
           
        });
    
})
        </script>
    </body>
</html>